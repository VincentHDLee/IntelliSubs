# Feature: Custom Dictionary

The Custom Dictionary feature in 智字幕 (IntelliSubs) allows you to improve the accuracy of the ASR (Automatic Speech Recognition) output by providing specific replacements for words or phrases that the ASR model might commonly misinterpret, especially for Japanese brand names, technical terms, unique character names, or specific colloquialisms.

## What is a Custom Dictionary and Why Use It?

Even advanced ASR models like Whisper can sometimes struggle with:

*   **Proper Nouns:** Unique names of people, products, companies, or fictional characters.
*   **Technical Jargon:** Specialized terminology within a specific field.
*   **Newly Coined Words or Slang:** Terms that are not yet part of the ASR model's general training data.
*   **Common ASR "Mishears":** Words that sound similar to others and are frequently confused by the ASR.
*   **Stylistic Preferences:** For example, always wanting a specific English loanword to be written in Katakana or Kanji in a certain way.

A custom dictionary provides a list of "find and replace" rules that are applied to the ASR's raw transcribed text *before* further processing like punctuation or LLM enhancement. This helps ensure key terms are correctly represented from an early stage.

## Format of the Dictionary File

IntelliSubs expects the custom dictionary to be a plain text file, typically with a `.csv` (Comma Separated Values) or `.txt` extension. Each line in the file should represent a single replacement rule, in the following format:

`original_phrase,corrected_phrase`

**Key points about the format:**

*   **Comma (`,`) as a separator:** The original phrase and the corrected phrase are separated by a single comma.
*   **One rule per line:** Each line defines one replacement.
*   **Case Sensitivity:** The matching of the `original_phrase` is typically **case-sensitive** by default, but the application settings might offer an option to make it case-insensitive. For Japanese, this is usually less of an issue for Kana/Kanji but can matter for Romanized input.
*   **Encoding:** The file should be saved with **UTF-8 encoding** to correctly handle Japanese characters.
*   **Comments (Optional):** Lines starting with a `#` (hash symbol) may be treated as comments and ignored by the application, allowing you to add notes to your dictionary file.

**Example `my_dictionary.csv` file:**

```csv
# Custom Dictionary for IntelliSubs - Japanese
# Format: OriginalFromASR,WhatItShouldBe

うぃすぱー,Whisper
じーぴーてぃー,GPT
いんてりさぶ,IntelliSubs
AIあしすたんと,AIアシスタント
おはようございますっ,おはようございます
えーとですね,ええと
# Add your specific terms below
```

In this example:
*   If the ASR transcribes "うぃすぱー", it will be replaced with "Whisper".
*   If "えーとですね" appears, it will be changed to "ええと".

## How to Load and Use Your Custom Dictionary

1.  **Create Your Dictionary File:**
    *   Using a plain text editor (like Notepad, VS Code, Sublime Text, etc.), create a new file.
    *   Add your replacement rules, one per line, following the `original_phrase,corrected_phrase` format.
    *   Save the file with a `.csv` or `.txt` extension and ensure it's encoded in UTF-8. For example, `my_jp_dict.csv`.

2.  **Configure IntelliSubs to Use Your Dictionary:**
    *   Open the IntelliSubs application.
    *   Go to the **Settings** or **Preferences** panel.
    *   Look for an option labeled **"自定义词典路径" (Custom Dictionary Path)** or similar.
    *   Click the "Browse" button next to this option.
    *   A file dialog will appear. Navigate to and select your custom dictionary file (e.g., `my_jp_dict.csv`).
    *   The path to your dictionary file should now be displayed in the settings.
    *   Save your settings.

3.  **Processing with the Custom Dictionary:**
    *   Once configured, IntelliSubs will automatically load and apply the rules from your custom dictionary file each time it processes an audio/video file.
    *   The replacements are typically applied early in the text processing pipeline.

## Tips for Creating an Effective Custom Dictionary

*   **Start Small:** Begin by adding terms that you notice are frequently transcribed incorrectly for your specific content.
*   **Be Specific:** The more specific the `original_phrase`, the less likely it is to cause unintended replacements.
*   **Test Regularly:** After adding new terms, test with a sample audio to ensure they are working as expected and not causing new issues.
*   **Backup Your Dictionary:** Keep a backup of your dictionary file.
*   **Order Doesn't Usually Matter:** The application will typically try to apply all rules. However, be mindful if one rule could partially undo or interfere with another (though this is rare with simple replacements).

By using the custom dictionary feature, you can significantly improve the accuracy and consistency of your Japanese subtitles generated by IntelliSubs, tailoring the output to your specific needs and content.